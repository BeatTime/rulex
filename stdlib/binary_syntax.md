# Go二进制语法
为了给golang的二进制操作增加特性，搞了个二进制语法库，其实这个语法是来自Erlang的。目前这个功能主要用在 RULEX 的自定义协议编解码环节，方便对特殊的数据进行二进制级别的操作。
## 语法规则
```
[[Field:Bits ...]]
```
上面描述了一个非常简单的二进制语法规则,`[[]]>` 表示是个二进制数据，`Field`是最终提取出来的变量名，`Bits` 表示这个变量占了几个 `Bit`.
## 案例
PLC给网关发送了一个数据包，这个数据包是包含了5个线圈的状态，在二进制模式下数据如下：
```
BinaryData = 00000
```
首先我们试试用Golang位语法提取:
```
C1 = (BinaryData & 0b00000001) >> 1
C2 = (BinaryData & 0b00000001) >> 2
C3 = (BinaryData & 0b00000001) >> 3
C4 = (BinaryData & 0b00000001) >> 4
C5 = (BinaryData & 0b00000001) >> 5
```
为什么这么麻烦？主要数据其实是5位数据，和我们正常情况下使用的8位一个字节相比，虽然位操作也能实现提取功能，但是这样是不友好或者不人性化的，因此我专门设计了这个二进制语法来提取状态：
```
[[_, _, _, C1:1,C2:1,C3:1,C4:1,C5:1]] = BinaryData
```
这样就可以一次性非常方便的拿到状态, `"_"` 表示这里的数据我们不关心。在位语法的帮助下，我们可以匹配任意位数的数据。